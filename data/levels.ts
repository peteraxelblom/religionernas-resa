import { Level, Boss } from '@/types/level';
import { comparisonMasteryRequirements } from '@/lib/unlockSystem';

export const levels: Level[] = [
  // Origin/Tutorial levels
  {
    id: 'origin-1',
    name: 'Abrahams tält',
    description: 'Lär dig om de tre religionernas gemensamma ursprung',
    religion: 'shared',
    type: 'tutorial',
    order: 1,
    requiredLevel: null,
    cardIds: ['shared-001', 'shared-002', 'shared-003'],
    passingScore: 60,
    timeBonus: 60,
  },
  {
    id: 'origin-2',
    name: 'Gemensamma rötter',
    description: 'Upptäck vad religionerna har gemensamt',
    religion: 'shared',
    type: 'normal',
    order: 2,
    requiredLevel: 'origin-1',
    cardIds: ['shared-004', 'shared-005', 'shared-006'],
    passingScore: 60,
    timeBonus: 60,
  },
  {
    id: 'origin-3',
    name: 'Profeterna',
    description: 'Lär dig om viktiga profeter',
    religion: 'shared',
    type: 'normal',
    order: 3,
    requiredLevel: 'origin-2',
    cardIds: ['shared-007', 'shared-008'],
    passingScore: 60,
    timeBonus: 45,
  },

  // Judaism levels
  {
    id: 'judaism-1',
    name: 'Judendomens början',
    description: 'Abraham och judendomens ursprung',
    religion: 'judaism',
    type: 'normal',
    order: 4,
    requiredLevel: 'origin-3',
    cardIds: ['jud-001', 'jud-002', 'jud-003', 'jud-004'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'judaism-2',
    name: 'Mose och budorden',
    description: 'Befrielsen från Egypten',
    religion: 'judaism',
    type: 'normal',
    order: 5,
    requiredLevel: 'judaism-1',
    cardIds: ['jud-005', 'jud-006', 'jud-007', 'jud-008'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'judaism-3',
    name: 'Tanach och Tora',
    description: 'Judendomens heliga skrifter',
    religion: 'judaism',
    type: 'normal',
    order: 6,
    requiredLevel: 'judaism-2',
    cardIds: ['jud-009', 'jud-010', 'jud-011', 'jud-012', 'jud-013'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'judaism-4',
    name: 'Synagogan',
    description: 'Judisk gudstjänst och symboler',
    religion: 'judaism',
    type: 'normal',
    order: 7,
    requiredLevel: 'judaism-3',
    cardIds: ['jud-014', 'jud-015', 'jud-016', 'jud-017'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'judaism-5',
    name: 'Kosher',
    description: 'Matregler och traditioner',
    religion: 'judaism',
    type: 'normal',
    order: 8,
    requiredLevel: 'judaism-4',
    cardIds: ['jud-018', 'jud-019', 'jud-020', 'jud-021'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'judaism-6',
    name: 'Judiska högtider',
    description: 'Pesach, Chanukka och mer',
    religion: 'judaism',
    type: 'normal',
    order: 9,
    requiredLevel: 'judaism-5',
    cardIds: ['jud-022', 'jud-023', 'jud-024', 'jud-025', 'jud-026'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'judaism-7',
    name: 'Sabbat och ceremonier',
    description: 'Vilodagen och livets högtider',
    religion: 'judaism',
    type: 'normal',
    order: 10,
    requiredLevel: 'judaism-6',
    cardIds: ['jud-027', 'jud-028', 'jud-029', 'jud-030', 'jud-031'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'judaism-8',
    name: 'Judiska riktningar',
    description: 'Ortodoxa, konservativa och liberala',
    religion: 'judaism',
    type: 'normal',
    order: 11,
    requiredLevel: 'judaism-7',
    cardIds: ['jud-032', 'jud-033', 'jud-034'],
    passingScore: 60,
    timeBonus: 60,
  },
  {
    id: 'judaism-9',
    name: 'Messias och Jerusalem',
    description: 'Judisk tro och heliga platser',
    religion: 'judaism',
    type: 'normal',
    order: 12,
    requiredLevel: 'judaism-8',
    cardIds: ['jud-035', 'jud-036', 'jud-037', 'jud-038'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'boss-judaism',
    name: 'Boss: Judendomen',
    description: 'Visa att du kan allt om judendomen!',
    religion: 'judaism',
    type: 'boss',
    order: 13,
    requiredLevel: 'judaism-9',
    cardIds: [], // Boss uses random cards from all Judaism levels
    passingScore: 70,
  },

  // Christianity levels
  {
    id: 'christianity-1',
    name: 'Kristendomens grund',
    description: 'Världens största religion',
    religion: 'christianity',
    type: 'normal',
    order: 14,
    requiredLevel: 'boss-judaism',
    cardIds: ['chr-001', 'chr-002', 'chr-003', 'chr-004'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'christianity-2',
    name: 'Jesus',
    description: 'Kristendomens viktigaste person',
    religion: 'christianity',
    type: 'normal',
    order: 15,
    requiredLevel: 'christianity-1',
    cardIds: ['chr-005', 'chr-006', 'chr-007', 'chr-008', 'chr-009'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'christianity-3',
    name: 'Bibeln',
    description: 'Kristendomens heliga bok',
    religion: 'christianity',
    type: 'normal',
    order: 16,
    requiredLevel: 'christianity-2',
    cardIds: ['chr-010', 'chr-011', 'chr-012', 'chr-013', 'chr-014'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'christianity-4',
    name: 'Korsfästelsen',
    description: 'Jesus död och uppståndelse',
    religion: 'christianity',
    type: 'normal',
    order: 17,
    requiredLevel: 'christianity-3',
    cardIds: ['chr-015', 'chr-016', 'chr-017', 'chr-018', 'chr-019'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'christianity-5',
    name: 'Treenigheten',
    description: 'Fadern, Sonen och Anden',
    religion: 'christianity',
    type: 'normal',
    order: 18,
    requiredLevel: 'christianity-4',
    cardIds: ['chr-020', 'chr-021', 'chr-022', 'chr-023', 'chr-024', 'chr-025'],
    passingScore: 60,
    timeBonus: 150,
  },
  {
    id: 'christianity-6',
    name: 'Kyrkan',
    description: 'Gudstjänst och präster',
    religion: 'christianity',
    type: 'normal',
    order: 19,
    requiredLevel: 'christianity-5',
    cardIds: ['chr-026', 'chr-027', 'chr-028', 'chr-029'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'christianity-7',
    name: 'Kristna högtider',
    description: 'Jul, påsk och mer',
    religion: 'christianity',
    type: 'normal',
    order: 20,
    requiredLevel: 'christianity-6',
    cardIds: ['chr-030', 'chr-031', 'chr-032', 'chr-033', 'chr-034'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'christianity-8',
    name: 'Ceremonier',
    description: 'Dop, konfirmation och nattvard',
    religion: 'christianity',
    type: 'normal',
    order: 21,
    requiredLevel: 'christianity-7',
    cardIds: ['chr-035', 'chr-036', 'chr-037', 'chr-038', 'chr-039'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'christianity-9',
    name: 'Kristna riktningar',
    description: 'Katolska, ortodoxa och protestantiska',
    religion: 'christianity',
    type: 'normal',
    order: 22,
    requiredLevel: 'christianity-8',
    cardIds: ['chr-040', 'chr-041', 'chr-042', 'chr-043', 'chr-044', 'chr-045'],
    passingScore: 60,
    timeBonus: 150,
  },
  {
    id: 'boss-christianity',
    name: 'Boss: Kristendomen',
    description: 'Visa att du kan allt om kristendomen!',
    religion: 'christianity',
    type: 'boss',
    order: 23,
    requiredLevel: 'christianity-9',
    cardIds: [],
    passingScore: 70,
  },

  // Islam levels
  {
    id: 'islam-1',
    name: 'Islams grund',
    description: 'Världens näst största religion',
    religion: 'islam',
    type: 'normal',
    order: 24,
    requiredLevel: 'boss-christianity',
    cardIds: ['isl-001', 'isl-002', 'isl-003', 'isl-004', 'isl-005'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-2',
    name: 'Muhammed',
    description: 'Islams viktigaste profet',
    religion: 'islam',
    type: 'normal',
    order: 25,
    requiredLevel: 'islam-1',
    cardIds: ['isl-006', 'isl-007', 'isl-008', 'isl-009', 'isl-010'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-3',
    name: 'Koranen',
    description: 'Islams heliga bok',
    religion: 'islam',
    type: 'normal',
    order: 26,
    requiredLevel: 'islam-2',
    cardIds: ['isl-011', 'isl-012', 'isl-013', 'isl-014', 'isl-015'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-4',
    name: 'De fem pelarna',
    description: 'Islams viktigaste plikter',
    religion: 'islam',
    type: 'normal',
    order: 27,
    requiredLevel: 'islam-3',
    cardIds: ['isl-016', 'isl-017', 'isl-018', 'isl-019', 'isl-020', 'isl-021'],
    passingScore: 60,
    timeBonus: 150,
  },
  {
    id: 'islam-5',
    name: 'Moskén',
    description: 'Muslimsk gudstjänst',
    religion: 'islam',
    type: 'normal',
    order: 28,
    requiredLevel: 'islam-4',
    cardIds: ['isl-022', 'isl-023', 'isl-024', 'isl-025', 'isl-026'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-6',
    name: 'Halal',
    description: 'Matregler inom islam',
    religion: 'islam',
    type: 'normal',
    order: 29,
    requiredLevel: 'islam-5',
    cardIds: ['isl-027', 'isl-028', 'isl-029', 'isl-030'],
    passingScore: 60,
    timeBonus: 90,
  },
  {
    id: 'islam-7',
    name: 'Ramadan',
    description: 'Fastan och högtiderna',
    religion: 'islam',
    type: 'normal',
    order: 30,
    requiredLevel: 'islam-6',
    cardIds: ['isl-031', 'isl-032', 'isl-033', 'isl-034', 'isl-035'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-8',
    name: 'Heliga platser',
    description: 'Mecka, Medina och Jerusalem',
    religion: 'islam',
    type: 'normal',
    order: 31,
    requiredLevel: 'islam-7',
    cardIds: ['isl-036', 'isl-037', 'isl-038', 'isl-039', 'isl-040'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'islam-9',
    name: 'Sunni och shia',
    description: 'Riktningar inom islam',
    religion: 'islam',
    type: 'normal',
    order: 32,
    requiredLevel: 'islam-8',
    cardIds: ['isl-041', 'isl-042', 'isl-043', 'isl-044', 'isl-045'],
    passingScore: 60,
    timeBonus: 120,
  },
  {
    id: 'boss-islam',
    name: 'Boss: Islam',
    description: 'Visa att du kan allt om islam!',
    religion: 'islam',
    type: 'boss',
    order: 33,
    requiredLevel: 'islam-9',
    cardIds: [],
    passingScore: 70,
  },

  // Comparison levels (Phase 3: Can unlock via mastery OR linear progression)
  {
    id: 'comparison-1',
    name: 'Likheter',
    description: 'Vad har religionerna gemensamt?',
    religion: 'shared',
    type: 'comparison',
    order: 34,
    requiredLevel: 'boss-islam',
    cardIds: ['cmp-001', 'cmp-002', 'cmp-003', 'cmp-004'],
    passingScore: 60,
    timeBonus: 90,
    masteryRequirement: comparisonMasteryRequirements['comparison-1'],
  },
  {
    id: 'comparison-2',
    name: 'Heliga böcker',
    description: 'Jämför skrifterna',
    religion: 'shared',
    type: 'comparison',
    order: 35,
    requiredLevel: 'comparison-1',
    cardIds: ['cmp-005', 'cmp-006', 'cmp-007', 'cmp-008'],
    passingScore: 60,
    timeBonus: 90,
    masteryRequirement: comparisonMasteryRequirements['comparison-2'],
  },
  {
    id: 'comparison-3',
    name: 'Ledare och platser',
    description: 'Rabbin, präst och imam',
    religion: 'shared',
    type: 'comparison',
    order: 36,
    requiredLevel: 'comparison-2',
    cardIds: ['cmp-009', 'cmp-010', 'cmp-011', 'cmp-012', 'cmp-013', 'cmp-014'],
    passingScore: 60,
    timeBonus: 150,
    masteryRequirement: comparisonMasteryRequirements['comparison-3'],
  },
  {
    id: 'comparison-4',
    name: 'Skillnader',
    description: 'Vad skiljer religionerna åt?',
    religion: 'shared',
    type: 'comparison',
    order: 37,
    requiredLevel: 'comparison-3',
    cardIds: ['cmp-015', 'cmp-016', 'cmp-017', 'cmp-018'],
    passingScore: 60,
    timeBonus: 90,
    masteryRequirement: comparisonMasteryRequirements['comparison-4'],
  },
  {
    id: 'comparison-5',
    name: 'Mat och högtider',
    description: 'Kosher, halal och traditioner',
    religion: 'shared',
    type: 'comparison',
    order: 38,
    requiredLevel: 'comparison-4',
    cardIds: ['cmp-019', 'cmp-020', 'cmp-021', 'cmp-022', 'cmp-023', 'cmp-024'],
    passingScore: 60,
    timeBonus: 150,
    masteryRequirement: comparisonMasteryRequirements['comparison-5'],
  },
  {
    id: 'boss-final',
    name: 'SLUTBOSS: Mästaren',
    description: 'Den ultimata utmaningen!',
    religion: 'shared',
    type: 'boss',
    order: 39,
    requiredLevel: 'comparison-5',
    cardIds: [],
    passingScore: 75,
  },
];

export const bosses: Boss[] = [
  {
    id: 'boss-judaism',
    name: 'Judendomen',
    description: 'Besegra bossen genom att svara rätt på frågor om judendomen!',
    religion: 'judaism',
    levelId: 'boss-judaism',
    health: 12,
    lives: 3,
    cardIds: [], // Will be filled with random Judaism cards
    rewardBadge: 'judaism-expert',
  },
  {
    id: 'boss-christianity',
    name: 'Kristendomen',
    description: 'Besegra bossen genom att svara rätt på frågor om kristendomen!',
    religion: 'christianity',
    levelId: 'boss-christianity',
    health: 12,
    lives: 3,
    cardIds: [],
    rewardBadge: 'christianity-expert',
  },
  {
    id: 'boss-islam',
    name: 'Islam',
    description: 'Besegra bossen genom att svara rätt på frågor om islam!',
    religion: 'islam',
    levelId: 'boss-islam',
    health: 12,
    lives: 3,
    cardIds: [],
    rewardBadge: 'islam-expert',
  },
  {
    id: 'boss-final',
    name: 'Mästaren',
    description: 'Den slutliga utmaningen - frågor från alla religioner!',
    religion: 'shared',
    levelId: 'boss-final',
    health: 20,
    lives: 3,
    cardIds: [],
    rewardBadge: 'master',
  },
];

// Helper functions
export function getLevelById(id: string): Level | undefined {
  return levels.find(level => level.id === id);
}

export function getNextLevel(currentLevelId: string): Level | undefined {
  const current = getLevelById(currentLevelId);
  if (!current) return undefined;
  return levels.find(level => level.order === current.order + 1);
}

export function isLevelUnlocked(levelId: string, completedLevels: string[]): boolean {
  const level = getLevelById(levelId);
  if (!level) return false;
  if (!level.requiredLevel) return true;
  return completedLevels.includes(level.requiredLevel);
}

export function getLevelsByReligion(religion: Level['religion']): Level[] {
  return levels.filter(level => level.religion === religion);
}

export function getBossById(id: string): Boss | undefined {
  return bosses.find(boss => boss.id === id);
}
